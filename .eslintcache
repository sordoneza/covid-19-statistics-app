[{"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\index.js":"1","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\App.js":"2","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\AppContainer.js":"3","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\context\\AuthContext.js":"4","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\context\\FetchContext.js":"5","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\pages\\NotFound.js":"6","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\pages\\Home.js":"7","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\pages\\Statistic.js":"8","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\pages\\Login.js":"9","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\pages\\Signup.js":"10","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\components\\Header.js":"11","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\components\\Footer.js":"12","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\utils\\fetch.js":"13"},{"size":296,"mtime":1612226976264,"results":"14","hashOfConfig":"15"},{"size":2153,"mtime":1612244560364,"results":"16","hashOfConfig":"15"},{"size":359,"mtime":1612226976257,"results":"17","hashOfConfig":"15"},{"size":2076,"mtime":1612248628619,"results":"18","hashOfConfig":"15"},{"size":1130,"mtime":1612226976262,"results":"19","hashOfConfig":"15"},{"size":291,"mtime":1612226976269,"results":"20","hashOfConfig":"15"},{"size":409,"mtime":1612249092134,"results":"21","hashOfConfig":"15"},{"size":162,"mtime":1612226976273,"results":"22","hashOfConfig":"15"},{"size":2649,"mtime":1612249421555,"results":"23","hashOfConfig":"15"},{"size":2655,"mtime":1612249426708,"results":"24","hashOfConfig":"15"},{"size":1241,"mtime":1612249476120,"results":"25","hashOfConfig":"15"},{"size":201,"mtime":1612226976259,"results":"26","hashOfConfig":"15"},{"size":167,"mtime":1612242999523,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"13ljrh8",{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"30"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\index.js",[],["56","57"],"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\App.js",[],"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\AppContainer.js",[],"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\context\\AuthContext.js",["58"],"import React, { createContext, useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { publicFetch } from '../utils/fetch';\r\n\r\nconst AuthContext = createContext();\r\nconst { Provider } = AuthContext;\r\n\r\nconst AuthProvider = ({ children }) => {\r\n  const history = useHistory();\r\n\r\n  // Auth State\r\n  const [authState, setAuthState] = useState({\r\n    token: undefined,\r\n    userInfo: {},\r\n    expiresAt: undefined,\r\n  });\r\n\r\n  const setAuthInfo = ({ accessToken, userInfo, expiresAt }) => {\r\n    setAuthState({\r\n      token: accessToken,\r\n      userInfo,\r\n      expiresAt,\r\n    });\r\n  };\r\n\r\n  // Handle refreshToken\r\n  const refreshToken = async () => {\r\n    try {\r\n      // Request new access token\r\n      const { data } = await publicFetch.get('/auth/refreshToken');\r\n\r\n      // Schedule automatic refreh request when the accessToken is about to expire\r\n      setTimeout(() => {\r\n        refreshToken();\r\n      }, data.expiresAt * 1000 - 500);\r\n\r\n      setAuthInfo(data);\r\n    } catch (err) {\r\n      setAuthInfo({});\r\n      history.push('/login');\r\n    }\r\n  };\r\n\r\n  // Handle Logout\r\n  const logout = async () => {\r\n    // Request to logout from server to delete refresh token\r\n    const { data } = await publicFetch.get('/auth/logout');\r\n\r\n    // Clear auth State and redict to Login\r\n    if (data) {\r\n      setAuthState({});\r\n      history.push('/login');\r\n    }\r\n  };\r\n\r\n  // Handle authenticate validation\r\n  const isAuthenticated = () => {\r\n    // If accessToken or expiresAt is missing then not authenticated\r\n    if (!authState.token || !authState.expiresAt) {\r\n      return false;\r\n    }\r\n\r\n    // Validate if accessToken has'nt expired\r\n    return new Date().getTime() / 1000 < authState.expiresAt;\r\n  };\r\n\r\n  useEffect(() => {\r\n    refreshToken();\r\n  }, []);\r\n\r\n  return (\r\n    <Provider\r\n      value={{\r\n        authState,\r\n        setAuthState: authInfo => setAuthInfo(authInfo),\r\n        logout,\r\n        isAuthenticated,\r\n      }}\r\n    >\r\n      {children}\r\n    </Provider>\r\n  );\r\n};\r\n\r\nexport { AuthContext, AuthProvider };\r\n","C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\context\\FetchContext.js",[],"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\pages\\NotFound.js",[],"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\pages\\Home.js",[],"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\pages\\Statistic.js",[],"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\pages\\Login.js",[],"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\pages\\Signup.js",[],"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\components\\Header.js",[],"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\components\\Footer.js",[],"C:\\Users\\Sergio\\Desktop\\NodeJs\\covid-19-statistics-app\\src\\utils\\fetch.js",[],{"ruleId":"59","replacedBy":"60"},{"ruleId":"61","replacedBy":"62"},{"ruleId":"63","severity":1,"message":"64","line":69,"column":6,"nodeType":"65","endLine":69,"endColumn":8,"suggestions":"66"},"no-native-reassign",["67"],"no-negated-in-lhs",["68"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'refreshToken'. Either include it or remove the dependency array.","ArrayExpression",["69"],"no-global-assign","no-unsafe-negation",{"desc":"70","fix":"71"},"Update the dependencies array to be: [refreshToken]",{"range":"72","text":"73"},[1801,1803],"[refreshToken]"]